(this["webpackJsonpmusic-tagger"]=this["webpackJsonpmusic-tagger"]||[]).push([[0],{10:function(e,n,a){"use strict";(function(e){a.d(n,"b",(function(){return g})),a.d(n,"c",(function(){return _})),a.d(n,"e",(function(){return f})),a.d(n,"d",(function(){return k})),a.d(n,"f",(function(){return C})),a.d(n,"a",(function(){return O}));var t=a(9),r=a.n(t),i=a(22),o=a(50),c=a.n(o),l=a(38),s=a(44),u=a.n(s),d=a(11),m=a.n(d),p=a(51),h=a.n(p),g=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},_=function(e){var n=e.split("_").map((function(e){return e.charAt(0).toLowerCase()+e.slice(1).toLowerCase()})).join("_");return"".concat("/music-tagger","/images/").concat(n,".jpg")},f=function(){return new l.InferenceSession({backendHint:"webgl"})};function w(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(r.a.mark((function e(n){var a,t,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=(a=[1,3,299,299]).reduce((function(e,n){return e*n})),i=new l.Tensor(new Float32Array(t),"float32",a),o=0;o<t;o++)i.data[o]=2*Math.random()-1;return e.next=6,n.run([i]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadModel(h.a);case 2:return e.next=4,w(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(i.a)(r.a.mark((function e(n,a,t){var i,o,c,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.width,o=a.height,c=y(a),s=new l.Tensor(c,"float32",[1,3,i,o]),e.next=5,n.run([s]);case 5:u=e.sent,t(u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,n,a){setTimeout((function(){return function(e,n,a){return E.apply(this,arguments)}(e,n,a)}),10)}var y=function(e){var n=e.data,a=e.width,t=e.height,r=u()(new Float32Array(n),[a,t,4]),i=u()(new Float32Array(a*t*3),[1,3,a,t]);return m.a.assign(i.pick(0,0,null,null),r.pick(null,null,0)),m.a.assign(i.pick(0,1,null,null),r.pick(null,null,1)),m.a.assign(i.pick(0,2,null,null),r.pick(null,null,2)),m.a.divseq(i,255),m.a.subseq(i.pick(0,0,null,null),.485),m.a.subseq(i.pick(0,1,null,null),.456),m.a.subseq(i.pick(0,2,null,null),.406),m.a.divseq(i.pick(0,0,null,null),.229),m.a.divseq(i.pick(0,1,null,null),.224),m.a.divseq(i.pick(0,2,null,null),.225),i.data},j=function(n){return new Promise((function(a,t){e.setTimeout((function(){return a()}),n)}))},x={maxWidth:299,maxHeight:299,cover:!0,crop:!0,canvas:!0,crossOrigin:"Anonymous",orientation:!0},S=function(e){return new Promise((function(n,a){c()(e,(function(e){return n(e)}),x)}))},O=function(){var e=Object(i.a)(r.a.mark((function e(n,a,t){var i,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,S(n);case 4:if("error"!==(i=e.sent).type){e.next=7;break}throw new Error("could not load image");case 7:return(o=a.current.getContext("2d")).drawImage(i,0,0),e.next=11,j(1);case 11:c=o.getImageData(0,0,a.current.width,a.current.height),t(c);case 13:case"end":return e.stop()}}),e)})));return function(n,a,t){return e.apply(this,arguments)}}()}).call(this,a(75))},51:function(e,n,a){e.exports=a.p+"static/media/dogs-resnet18.e15a2861.onnx"},65:function(e,n,a){e.exports=a(87)},87:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),i=a(12),o=a.n(i),c=a(9),l=a.n(c),s=a(22),u=a(15),d=["Afghan_hound","African_hunting_dog","Airedale","American_Staffordshire_terrier","Appenzeller","Australian_terrier","Bedlington_terrier","Bernese_mountain_dog","Blenheim_spaniel","Border_collie","Border_terrier","Boston_bull","Bouvier_des_Flandres","Brabancon_griffon","Brittany_spaniel","Cardigan","Chesapeake_Bay_retriever","Chihuahua","Dandie_Dinmont","Doberman","English_foxhound","English_setter","English_springer","EntleBucher","Eskimo_dog","French_bulldog","German_shepherd","German_short-haired_pointer","Gordon_setter","Great_Dane","Great_Pyrenees","Greater_Swiss_Mountain_dog","Ibizan_hound","Irish_setter","Irish_terrier","Irish_water_spaniel","Irish_wolfhound","Italian_greyhound","Japanese_spaniel","Kerry_blue_terrier","Labrador_retriever","Lakeland_terrier","Leonberger","Lhasa","Maltese_dog","Mexican_hairless","Newfoundland","Norfolk_terrier","Norwegian_elkhound","Norwich_terrier","Old_English_sheepdog","Pekinese","Pembroke","Pomeranian","Rhodesian_ridgeback","Rottweiler","Saint_Bernard","Saluki","Samoyed","Scotch_terrier","Scottish_deerhound","Sealyham_terrier","Shetland_sheepdog","Shih-Tzu","Siberian_husky","Staffordshire_bullterrier","Sussex_spaniel","Tibetan_mastiff","Tibetan_terrier","Walker_hound","Weimaraner","Welsh_springer_spaniel","West_Highland_white_terrier","Yorkshire_terrier","affenpinscher","basenji","basset","beagle","black-and-tan_coonhound","bloodhound","bluetick","borzoi","boxer","briard","bull_mastiff","cairn","chow","clumber","cocker_spaniel","collie","curly-coated_retriever","dhole","dingo","flat-coated_retriever","giant_schnauzer","golden_retriever","groenendael","keeshond","kelpie","komondor","kuvasz","malamute","malinois","miniature_pinscher","miniature_poodle","miniature_schnauzer","otterhound","papillon","pug","redbone","schipperke","silky_terrier","soft-coated_wheaten_terrier","standard_poodle","standard_schnauzer","toy_poodle","toy_terrier","vizsla","whippet","wire-haired_fox_terrier"],m=a(129),p=a(125),h=a(30),g=a(126),_=a(127),f=a(128),w=a(130),b=a(131),k=a(124),v=Object(k.a)({card:{width:299,height:299},item:{paddingTop:10}});function E(e){var n=e.items,a=v();return r.a.createElement(p.a,{className:a.card},r.a.createElement(g.a,{dense:!0},n.map((function(e){var n=e.avatar,t=e.name,i=e.percentage,o="".concat(t,"-").concat(i);return r.a.createElement(_.a,{key:o,className:a.item},r.a.createElement(f.a,null,r.a.createElement(m.a,{alt:"image of ".concat(t),src:n})),r.a.createElement(w.a,{id:o,primary:t}),r.a.createElement(b.a,null,r.a.createElement(h.a,null,i,"%")))}))))}var C=a(10),y=function(e,n){var a=Array.from(e).map((function(e,n){return[e,n]})).sort((function(e,n){return e[0]<n[0]?-1:e[0]>n[0]?1:0})).reverse().slice(0,n),t=e.map((function(e){return Math.exp(e)})).reduce((function(e,n){return e+n}));return a.map((function(e,n,a){var r=Object(u.a)(e,2),i=r[0],o=r[1];return{breed:d[o],act:i,prob:Math.exp(i)/t}}))};function j(e){var n=e.output;if(!n)return null;var a=y(n,5).map((function(e){var n=e.breed,a=e.prob;return{name:Object(C.b)(n),percentage:(100*a).toFixed(2),avatar:Object(C.c)(n)}}));return r.a.createElement(E,{items:a})}var x=a(134),S=a(3),O=a(52),B=a.n(O),A=a(133),N=a(140),F=a(132),T=Object(k.a)((function(e){return{box:{width:299,padding:0,margin:0},content:{boxSizing:"border-box"},info:{backgroundColor:e.palette.primary.main},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function W(e){var n=e.message,a=T();return r.a.createElement(N.a,{className:a.box},r.a.createElement(F.a,{className:Object(S.a)(a.info,a.content),message:r.a.createElement("span",{className:a.message},r.a.createElement(B.a,{className:Object(S.a)(a.icon,a.iconVariant)}),n)}))}function I(e){var n=e.message,a=T();return r.a.createElement(N.a,{className:a.box},r.a.createElement(F.a,{className:a.content,message:r.a.createElement("span",{className:a.message},r.a.createElement(A.a,{size:20,className:a.iconVariant}),n)}))}var D=a(54),Y=a.n(D),M=a(53),P=a.n(M),z=Object(k.a)({icon:{width:"50%",height:"50%",color:"grey"}}),G=function(e){var n=e.fileLoaded,a=e.isDragActive,t=z();return n?null:a?r.a.createElement(P.a,{className:t.icon}):r.a.createElement(Y.a,{className:t.icon})},L=a(56),R=Object(k.a)({card:{width:299,height:299,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10},canvas:{width:299,height:299,zIndex:0,position:"absolute"},input:{zIndex:9999,position:"absolute"}});function H(e){var n=e.setFile,a=e.canvasRef,i=e.fileLoaded,o=R(),c=Object(t.useCallback)((function(e){if(e.length>1)return console.log("can only handle one file at a time");if(0!==e.length){var a=e[0];if(!a.type.startsWith("image"))return console.log("file must be an image");n(a)}}),[n]),l=Object(L.a)({onDrop:c}),s=l.getRootProps,u=l.getInputProps,d=l.isDragActive;return r.a.createElement(p.a,Object.assign({},s(),{className:o.card}),r.a.createElement("canvas",{className:o.canvas,ref:a,width:299,height:299}),r.a.createElement("input",Object.assign({alt:"Image Dropzone",type:"image",className:o.input},u())),r.a.createElement(G,{fileLoaded:i,isDragActive:d}))}var J=a(135),q=Object(C.e)(),U=Object(k.a)((function(e){return{root:{flexGrow:1}}}));function K(){var e=Object(t.useState)(!1),n=Object(u.a)(e,2),a=n[0],i=n[1],o=Object(t.useState)(!1),c=Object(u.a)(o,2),d=c[0],m=c[1],p=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d&&!a){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.next=5,Object(C.d)(q);case 5:i(!0),m(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(t.useState)(null),g=Object(u.a)(h,2),_=g[0],f=g[1],w=Object(t.useRef)(null),b=Object(t.useState)(null),k=Object(u.a)(b,2),v=k[0],E=k[1];Object(t.useEffect)((function(){_&&Object(C.a)(_,w,E)}),[_]);var y=Object(t.useState)(null),S=Object(u.a)(y,2),O=S[0],B=S[1];Object(t.useEffect)((function(){a&&v&&Object(C.f)(q,v,B)}),[a,v]);var A=O&&O.values().next().value.data,N=U();return r.a.createElement("div",{className:N.root},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0},r.a.createElement(H,{setFile:f,canvasRef:w,fileLoaded:!!_}),!a&&!d&&r.a.createElement(J.a,{variant:"contained",onClick:p},"Load model (48 MB)"),!a&&d&&r.a.createElement(I,{message:"Loading model..."}),a&&v&&!O&&r.a.createElement(I,{message:"Running model..."}),a&&!_&&r.a.createElement(W,{message:"Upload a music clip file ..."}),!!_&&!v&&r.a.createElement(I,{message:"Loading music..."})),r.a.createElement(x.a,{item:!0},r.a.createElement(j,{output:A}))))}var V=a(138),Z=a(136),$=a(137),Q=a(141),X=a(142),ee=a(139),ne=a(26),ae=a.n(ne),te=("Bouvier_des_Flandres,https://commons.wikimedia.org/wiki/File:Ygor_Raiza.jpg,Eva Nordlund,CC BY-SA 2.5\nBrabancon_griffon,https://en.wikipedia.org/wiki/Griffon_Bruxellois#/media/File:0709_gucci_stolt.jpg,Maria Micha\xeblsson,CC BY-SA 3.0\nCardigan,https://en.wikipedia.org/wiki/Cardigan_Welsh_Corgi#/media/File:Wystawa_Rybnik_02.10.2011_welsh_corgi_cardigan_g%C5%82owa_pl.jpg,Pleple2000,CC BY-SA 3.0\nDandie_Dinmont,https://commons.wikimedia.org/wiki/File:A_Dandie_Dinmont.jpg,audrey_sel,CC BY-SA 2.0\nEnglish_foxhound,https://commons.wikimedia.org/wiki/English_Foxhound#/media/File:English_Foxhound_portrait.jpg,Thowra_uk,CC BY 2.0\nIrish_water_spaniel,https://commons.wikimedia.org/wiki/File:Irish_Water_Spaniel_4.jpg,Canarian,CC BY-SA 4.0 International\nJapanese_spaniel,https://commons.wikimedia.org/wiki/File:Japanese_ChinJapanese_Spaniel.jpg,T.shinzaemon,CC BY-SA 4.0 International\nKerry_blue_terrier,https://commons.wikimedia.org/wiki/Kerry_Blue_Terrier#/media/File:Kerry_Blue_Terrier_puppy.png,Vbi20,CC BY-SA 3.0\nMexican_Hairless,https://commons.wikimedia.org/wiki/File:Mexican_Hairless.jpg,Dagon Hoyohoy,CC-BY 2.0 Generic\nNorwich_terrier,https://commons.wikimedia.org/wiki/Norwich_Terrier#/media/File:Norwich_Terrier1.JPG,Helene Gisin Hgisin,CC BY-SA 4.0\nOld_English_sheepdog,https://commons.wikimedia.org/wiki/Old_English_Sheepdog#/media/File:Old_English_Sheep_Dog.JPG,Squigman,Public Domain\nscotch_terrier,https://en.wikipedia.org/wiki/Scottish_Terrier#/media/File:Scottish_Terrier_Photo_of_Face.jpg,Elise Carroll,CC BY-SA 4.0\nScottish_deerhound,https://en.wikipedia.org/wiki/Scottish_Deerhound#/media/File:Modhish_Archie_MacTavish-foto_hanna_Wo%C5%BAna-Gil.jpg,Hanna Wo\u017ana - Gil,CC BY-SA 3.0\nSealyham_terrier,https://en.wikipedia.org/wiki/Sealyham_Terrier#/media/File:Adult_Sealyham_Terrier.jpg,Chuck in MA,CC BY-SA 4.0\nSussex_spaniel,https://de.wikipedia.org/wiki/Datei:Sussex_spaniel_t43.jpg,Pleple2000,CC BY 3.0\nWalker_hound,https://en.wikipedia.org/wiki/Treeing_Walker_Coonhound#/media/File:Treeing-walker-coonhound-standing.jpg,Kingkong954,Public Domain\nblack-and-tan_coonhound,https://en.wikipedia.org/wiki/Black_and_Tan_Coonhound#/media/File:BTCoonhnd.jpg,Scraig,CC BY-SA 3.0\nclumber,https://en.wikipedia.org/wiki/Clumber_Spaniel#/media/File:Clumber_spaniel_rybnik_kamien_pppl.jpg,Pleple2000,CC BY-SA 4.0\ncollie,https://commons.wikimedia.org/wiki/File:Rough_Collie_600.jpg,sannse,CC BY-SA 3.0 Unported\notterhound,https://en.wikipedia.org/wiki/Otterhound#/media/File:Two_otterhounds.jpg,Machinecha~commonswiki,Public Domain\nredbone,https://commons.wikimedia.org/wiki/File:Memphis_the_Redbone_Coonhound_(7_Nov_2004).jpg,Arlawson,CC BY-SA 3.0 Unported\nschipperke,https://commons.wikimedia.org/wiki/Schipperke#/media/File:G%C5%82owa_gismo_-_schipperke.jpg,Lilly M,CC BY-SA 3.0\nwire-haired_fox_terrier,https://en.wikipedia.org/wiki/Wire_Fox_Terrier#/media/File:Wera.JPG,Duspivova,CC BY-SA 3.0".split("\n").map((function(e){var n=e.split(","),a=Object(u.a)(n,4),t=a[0],r=a[1],i=a[2],o=a[3];return{img:Object(C.c)(t),breed:t,source:r,author:i,license:o}})),Object(k.a)((function(e){return{root:{flexGrow:1},content:{marginTop:20},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},table:{width:"100%"},footer:{padding:e.spacing(2),marginTop:"auto"},button:{margin:e.spacing(1)}}})));var re=function(){var e=te();return r.a.createElement("div",{className:e.root},r.a.createElement(Z.a,{position:"static"},r.a.createElement($.a,null,r.a.createElement(h.a,{variant:"h6",className:e.title},"Music Tagger"))),r.a.createElement(V.a,{className:e.content},r.a.createElement(K,null)),r.a.createElement(V.a,{className:e.content},r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(h.a,{className:e.heading},"How do I use this?")),r.a.createElement(ee.a,null,r.a.createElement(h.a,{variant:"body2"}))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},r.a.createElement(h.a,{className:e.heading},"What music tags does the classifier know?")),r.a.createElement(ee.a,null,r.a.createElement(h.a,{variant:"body2"}))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(h.a,{className:e.heading},"What is this good for?")),r.a.createElement(ee.a,null,r.a.createElement(h.a,{variant:"body2"}))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(h.a,{className:e.heading},"What happens to my data?")),r.a.createElement(ee.a,null,r.a.createElement(h.a,{variant:"body2"}))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(h.a,{className:e.heading},"Music Data credits")),r.a.createElement(ee.a,null)),r.a.createElement("footer",{className:e.footer},r.a.createElement(J.a,{className:e.button},"Developed by Mengyan Wu, Yuxiao Liu, Zihui Liu"))))},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/music-tagger",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/music-tagger","/service-worker.js");ie?(!function(e,n){fetch(e).then((function(a){var t=a.headers.get("content-type");404===a.status||null!=t&&-1===t.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):oe(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):oe(n,e)}))}}()}},[[65,1,2]]]);
//# sourceMappingURL=main.8c40c848.chunk.js.map