(this["webpackJsonpmusic-tagger"]=this["webpackJsonpmusic-tagger"]||[]).push([[0],{105:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(16),o=t.n(i),c=t(39),l=t(138),s=t(152),u=t(156),m=t(154),d=t(153),p=t(38),h=t(8),f=t(11),g=t.n(f),b=t(28),v=t(26),E=["Afghan_hound","African_hunting_dog","Airedale","American_Staffordshire_terrier","Appenzeller","Australian_terrier","Bedlington_terrier","Bernese_mountain_dog","Blenheim_spaniel","Border_collie","Border_terrier","Boston_bull","Bouvier_des_Flandres","Brabancon_griffon","Brittany_spaniel","Cardigan","Chesapeake_Bay_retriever","Chihuahua","Dandie_Dinmont","Doberman","English_foxhound","English_setter","English_springer","EntleBucher","Eskimo_dog","French_bulldog","German_shepherd","German_short-haired_pointer","Gordon_setter","Great_Dane","Great_Pyrenees","Greater_Swiss_Mountain_dog","Ibizan_hound","Irish_setter","Irish_terrier","Irish_water_spaniel","Irish_wolfhound","Italian_greyhound","Japanese_spaniel","Kerry_blue_terrier","Labrador_retriever","Lakeland_terrier","Leonberger","Lhasa","Maltese_dog","Mexican_hairless","Newfoundland","Norfolk_terrier","Norwegian_elkhound","Norwich_terrier","Old_English_sheepdog","Pekinese","Pembroke","Pomeranian","Rhodesian_ridgeback","Rottweiler","Saint_Bernard","Saluki","Samoyed","Scotch_terrier","Scottish_deerhound","Sealyham_terrier","Shetland_sheepdog","Shih-Tzu","Siberian_husky","Staffordshire_bullterrier","Sussex_spaniel","Tibetan_mastiff","Tibetan_terrier","Walker_hound","Weimaraner","Welsh_springer_spaniel","West_Highland_white_terrier","Yorkshire_terrier","affenpinscher","basenji","basset","beagle","black-and-tan_coonhound","bloodhound","bluetick","borzoi","boxer","briard","bull_mastiff","cairn","chow","clumber","cocker_spaniel","collie","curly-coated_retriever","dhole","dingo","flat-coated_retriever","giant_schnauzer","golden_retriever","groenendael","keeshond","kelpie","komondor","kuvasz","malamute","malinois","miniature_pinscher","miniature_poodle","miniature_schnauzer","otterhound","papillon","pug","redbone","schipperke","silky_terrier","soft-coated_wheaten_terrier","standard_poodle","standard_schnauzer","toy_poodle","toy_terrier","vizsla","whippet","wire-haired_fox_terrier"],_=t(143),w=t(139),k=t(140),y=t(141),x=t(142),j=t(144),O=t(145),N=Object(l.a)({card:{width:299,height:299},item:{paddingTop:10}});function S(e){var a=e.items,t=N();return r.a.createElement(w.a,{className:t.card},r.a.createElement(k.a,{dense:!0},a.map((function(e){var a=e.avatar,n=e.name,i=e.percentage,o="".concat(n,"-").concat(i);return r.a.createElement(y.a,{key:o,className:t.item},r.a.createElement(x.a,null,r.a.createElement(_.a,{alt:"image of ".concat(n),src:a})),r.a.createElement(j.a,{id:o,primary:n}),r.a.createElement(O.a,null,r.a.createElement(c.a,null,i,"%")))}))))}var A=t(25),I=function(e,a){var t=Array.from(e).map((function(e,a){return[e,a]})).sort((function(e,a){return e[0]<a[0]?-1:e[0]>a[0]?1:0})).reverse().slice(0,a),n=e.map((function(e){return Math.exp(e)})).reduce((function(e,a){return e+a}));return t.map((function(e,a,t){var r=Object(v.a)(e,2),i=r[0],o=r[1];return{breed:E[o],act:i,prob:Math.exp(i)/n}}))};function B(e){var a=e.output;if(!a)return null;var t=I(a,5).map((function(e){var a=e.breed,t=e.prob;return{name:Object(A.b)(a),percentage:(100*t).toFixed(2),avatar:Object(A.c)(a)}}));return r.a.createElement(S,{items:t})}var L=t(148),W=t(3),z=t(66),C=t.n(z),R=t(147),T=t(155),D=t(146),F=Object(l.a)((function(e){return{box:{width:299,padding:0,margin:0},content:{boxSizing:"border-box"},info:{backgroundColor:e.palette.primary.main},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function P(e){var a=e.message,t=F();return r.a.createElement(T.a,{className:t.box},r.a.createElement(D.a,{className:Object(W.a)(t.info,t.content),message:r.a.createElement("span",{className:t.message},r.a.createElement(C.a,{className:Object(W.a)(t.icon,t.iconVariant)}),a)}))}function M(e){var a=e.message,t=F();return r.a.createElement(T.a,{className:t.box},r.a.createElement(D.a,{className:t.content,message:r.a.createElement("span",{className:t.message},r.a.createElement(R.a,{size:20,className:t.iconVariant}),a)}))}var G=t(68),U=t.n(G),q=t(67),H=t.n(q),V=Object(l.a)({icon:{width:"50%",height:"50%",color:"grey"}}),J=function(e){var a=e.fileLoaded,t=e.isDragActive,n=V();return a?null:t?r.a.createElement(H.a,{className:n.icon}):r.a.createElement(U.a,{className:n.icon})},K=t(72),X=Object(l.a)({card:{width:299,height:299,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10},canvas:{width:299,height:299,zIndex:0,position:"absolute"},input:{zIndex:9999,position:"absolute"}});function Y(e){var a=e.setFile,t=e.canvasRef,i=e.fileLoaded,o=X(),c=Object(n.useCallback)((function(e){if(e.length>1)return console.log("can only handle one file at a time");if(0!==e.length){var t=e[0];if(!t.type.startsWith("image"))return console.log("file must be an image");a(t)}}),[a]),l=Object(K.a)({onDrop:c}),s=l.getRootProps,u=l.getInputProps,m=l.isDragActive;return r.a.createElement(w.a,Object.assign({},s(),{className:o.card}),r.a.createElement("canvas",{className:o.canvas,ref:t,width:299,height:299}),r.a.createElement("input",Object.assign({alt:"Image Dropzone",type:"image",className:o.input},u())),r.a.createElement(J,{fileLoaded:i,isDragActive:m}))}var Z=t(149),Q=Object(A.e)(),$=Object(l.a)((function(e){return{root:{flexGrow:1}}}));function ee(){var e=Object(n.useState)(!1),a=Object(v.a)(e,2),t=a[0],i=a[1],o=Object(n.useState)(!1),c=Object(v.a)(o,2),l=c[0],s=c[1],u=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l&&!t){e.next=2;break}return e.abrupt("return");case 2:return s(!0),e.next=5,Object(A.d)(Q);case 5:i(!0),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(n.useState)(null),d=Object(v.a)(m,2),p=d[0],h=d[1],f=Object(n.useRef)(null),E=Object(n.useState)(null),_=Object(v.a)(E,2),w=_[0],k=_[1];Object(n.useEffect)((function(){p&&Object(A.a)(p,f,k)}),[p]);var y=Object(n.useState)(null),x=Object(v.a)(y,2),j=x[0],O=x[1];Object(n.useEffect)((function(){t&&w&&Object(A.f)(Q,w,O)}),[t,w]);var N=j&&j.values().next().value.data,S=$();return r.a.createElement("div",{className:S.root},r.a.createElement(L.a,{container:!0,spacing:3},r.a.createElement(L.a,{item:!0},r.a.createElement(Y,{setFile:h,canvasRef:f,fileLoaded:!!p}),!t&&!l&&r.a.createElement(Z.a,{variant:"contained",onClick:u},"Load model (48 MB)"),!t&&l&&r.a.createElement(M,{message:"Loading model..."}),t&&w&&!j&&r.a.createElement(M,{message:"Running model..."}),t&&!p&&r.a.createElement(P,{message:"Upload a music clip file ..."}),!!p&&!w&&r.a.createElement(M,{message:"Loading music..."})),r.a.createElement(L.a,{item:!0},r.a.createElement(B,{output:N}))))}var ae=t(150),te=t(157),ne=t(158),re=t(151),ie=t(33),oe=t.n(ie),ce=Object(l.a)((function(e){return{content:{marginTop:20},menuButton:{marginRight:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},table:{width:"100%"},footer:{padding:e.spacing(2),marginTop:"auto"},button:{margin:e.spacing(1)}}}));var le=function(){var e=ce();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{className:e.content},r.a.createElement(ee,null)),r.a.createElement(ae.a,{className:e.content},r.a.createElement(te.a,null,r.a.createElement(ne.a,{expandIcon:r.a.createElement(oe.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(c.a,{className:e.heading},"How do I use this?")),r.a.createElement(re.a,null,r.a.createElement(c.a,{variant:"body2"}))),r.a.createElement(te.a,null,r.a.createElement(ne.a,{expandIcon:r.a.createElement(oe.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},r.a.createElement(c.a,{className:e.heading},"What music tags does the classifier know?")),r.a.createElement(re.a,null,r.a.createElement(c.a,{variant:"body2"}))),r.a.createElement(te.a,null,r.a.createElement(ne.a,{expandIcon:r.a.createElement(oe.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(c.a,{className:e.heading},"What is this good for?")),r.a.createElement(re.a,null,r.a.createElement(c.a,{variant:"body2"}))),r.a.createElement(te.a,null,r.a.createElement(ne.a,{expandIcon:r.a.createElement(oe.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(c.a,{className:e.heading},"What happens to my data?")),r.a.createElement(re.a,null,r.a.createElement(c.a,{variant:"body2"}))),r.a.createElement(te.a,null,r.a.createElement(ne.a,{expandIcon:r.a.createElement(oe.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(c.a,{className:e.heading},"Music Data credits")),r.a.createElement(re.a,null))))},se=t(70),ue=t.n(se),me=Object(l.a)((function(e){return{content:{marginBottom:100,marginTop:100}}}));var de=function(){var e=me();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{className:e.content},r.a.createElement(ue.a,{width:"100%",slidesLink:"https://docs.google.com/presentation/d/1E7UU2hlorUFX68dGBQHP8KRNpKB5hXVNodulZvLooSA/edit#slide=id.g25f6af9dd6_0_0",slideDuration:5,position:1,showControls:!0,loop:!0})),r.a.createElement(ae.a,{className:e.content},r.a.createElement("object",{data:"http://africau.edu/images/default/sample.pdf",type:"application/pdf",width:"100%",height:"800"},r.a.createElement("p",null,"Alternative text - include a link ",r.a.createElement("a",{href:"http://africau.edu/images/default/sample.pdf"},"to the PDF!")))))},pe=Object(l.a)((function(e){return{content:{marginBottom:100,marginTop:100}}}));var he=function(){var e=pe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{className:e.content},r.a.createElement(c.a,null,"Developed by Mengyan Wu, Yuxiao Liu, Zihui Liu")))},fe=Object(l.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));var ge=function(){var e=fe();return r.a.createElement("div",{className:e.root},r.a.createElement(p.a,null,r.a.createElement(h.a,{path:"/",render:function(a){return r.a.createElement(s.a,null,r.a.createElement(d.a,null,r.a.createElement(c.a,{variant:"h6",className:e.title},"Music Tagger"),r.a.createElement(u.a,{value:a.location.pathname},r.a.createElement(m.a,{value:"/",label:"Home",component:p.b,to:"/"}),r.a.createElement(m.a,{value:"/report",label:"Report",component:p.b,to:"/report"}),r.a.createElement(m.a,{value:"/contact",label:"Contact",component:p.b,to:"/contact"}))))}}),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:le}),r.a.createElement(h.a,{path:"/report",component:de}),r.a.createElement(h.a,{path:"/contact",component:he}))))},be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(ge,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/music-tagger",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/music-tagger","/service-worker.js");be?(!function(e,a){fetch(e).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ve(a,e)}))}}()},25:function(e,a,t){"use strict";(function(e){t.d(a,"b",(function(){return f})),t.d(a,"c",(function(){return g})),t.d(a,"e",(function(){return b})),t.d(a,"d",(function(){return _})),t.d(a,"f",(function(){return y})),t.d(a,"a",(function(){return S}));var n=t(11),r=t.n(n),i=t(28),o=t(64),c=t.n(o),l=t(46),s=t(50),u=t.n(s),m=t(14),d=t.n(m),p=t(65),h=t.n(p),f=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},g=function(e){var a=e.split("_").map((function(e){return e.charAt(0).toLowerCase()+e.slice(1).toLowerCase()})).join("_");return"".concat("/music-tagger","/images/").concat(a,".jpg")},b=function(){return new l.InferenceSession({backendHint:"webgl"})};function v(e){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(r.a.mark((function e(a){var t,n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=(t=[1,3,299,299]).reduce((function(e,a){return e*a})),i=new l.Tensor(new Float32Array(n),"float32",t),o=0;o<n;o++)i.data[o]=2*Math.random()-1;return e.next=6,a.run([i]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.loadModel(h.a);case 2:return e.next=4,v(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(i.a)(r.a.mark((function e(a,t,n){var i,o,c,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.width,o=t.height,c=x(t),s=new l.Tensor(c,"float32",[1,3,i,o]),e.next=5,a.run([s]);case 5:u=e.sent,n(u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,a,t){setTimeout((function(){return function(e,a,t){return k.apply(this,arguments)}(e,a,t)}),10)}var x=function(e){var a=e.data,t=e.width,n=e.height,r=u()(new Float32Array(a),[t,n,4]),i=u()(new Float32Array(t*n*3),[1,3,t,n]);return d.a.assign(i.pick(0,0,null,null),r.pick(null,null,0)),d.a.assign(i.pick(0,1,null,null),r.pick(null,null,1)),d.a.assign(i.pick(0,2,null,null),r.pick(null,null,2)),d.a.divseq(i,255),d.a.subseq(i.pick(0,0,null,null),.485),d.a.subseq(i.pick(0,1,null,null),.456),d.a.subseq(i.pick(0,2,null,null),.406),d.a.divseq(i.pick(0,0,null,null),.229),d.a.divseq(i.pick(0,1,null,null),.224),d.a.divseq(i.pick(0,2,null,null),.225),i.data},j=function(a){return new Promise((function(t,n){e.setTimeout((function(){return t()}),a)}))},O={maxWidth:299,maxHeight:299,cover:!0,crop:!0,canvas:!0,crossOrigin:"Anonymous",orientation:!0},N=function(e){return new Promise((function(a,t){c()(e,(function(e){return a(e)}),O)}))},S=function(){var e=Object(i.a)(r.a.mark((function e(a,t,n){var i,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(a);case 4:if("error"!==(i=e.sent).type){e.next=7;break}throw new Error("could not load image");case 7:return(o=t.current.getContext("2d")).drawImage(i,0,0),e.next=11,j(1);case 11:c=o.getImageData(0,0,t.current.width,t.current.height),n(c);case 13:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}()}).call(this,t(58))},65:function(e,a,t){e.exports=t.p+"static/media/dogs-resnet18.e15a2861.onnx"},79:function(e,a,t){e.exports=t(105)}},[[79,1,2]]]);
//# sourceMappingURL=main.8f74c41d.chunk.js.map